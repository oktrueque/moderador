<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en" >
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <title>Moderator</title>

    <link th:href="@{/common/img/favicon.144x144.png}" href="../static/common/img/favicon.144x144.png" rel="apple-touch-icon" type="image/png" sizes="144x144"/>
    <link th:href="@{/common/img/favicon.114x114.png}" href="../static/common/img/favicon.114x114.png" rel="apple-touch-icon" type="image/png" sizes="114x114"/>
    <link th:href="@{/common/img/favicon.72x72.png}" href="../static/common/img/favicon.72x72.png" rel="apple-touch-icon" type="image/png" sizes="72x72"/>
    <link th:href="@{/common/img/favicon.57x57.png}" href="../static/common/img/favicon.57x57.png" rel="apple-touch-icon" type="image/png"/>
    <link th:href="@{/common/img/favicon.png}" href="../static/common/img/favicon.png" rel="icon" type="image/png"/>
    <link th:href="@{favicon.ico}" href="favicon.ico" rel="shortcut icon"/>

    <!-- HTML5 shim and Respond.js for < IE9 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script  th:src="@{https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js}" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script th:src="@{https://oss.maxcdn.com/respond/1.4.2/respond.min.js}" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Vendors Styles -->
    <!-- v1.0.0 -->
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/bootstrap/dist/css/bootstrap.min.css}" href="../static/vendors/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/jscrollpane/style/jquery.jscrollpane.css}" href="../static/vendors/jscrollpane/style/jquery.jscrollpane.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/ladda/dist/ladda-themeless.min.css}" href="../static/vendors/ladda/dist/ladda-themeless.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/select2/dist/css/select2.min.css}" href="../static/vendors/select2/dist/css/select2.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css}" href="../static/vendors/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/fullcalendar/dist/fullcalendar.min.css}" href="../static/vendors/fullcalendar/dist/fullcalendar.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/cleanhtmlaudioplayer/src/player.css}" href="../static/vendors/cleanhtmlaudioplayer/src/player.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/cleanhtmlvideoplayer/src/player.css}" href="../static/vendors/cleanhtmlvideoplayer/src/player.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/bootstrap-sweetalert/dist/sweetalert.css}" href="../static/vendors/bootstrap-sweetalert/dist/sweetalert.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/summernote/dist/summernote.css}" href="../static/vendors/summernote/dist/summernote.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/owl.carousel/dist/static/owl.carousel.min.css}" href="../static/vendors/owl.carousel/dist/static/owl.carousel.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/ionrangeslider/css/ion.rangeSlider.css}" href="../static/vendors/ionrangeslider/css/ion.rangeSlider.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/datatables/media/css/dataTables.bootstrap4.min.css}" href="../static/vendors/datatables/media/css/dataTables.bootstrap4.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/c3/c3.min.css}" href="../static/vendors/c3/c3.min.css"/>
    <link rel="stylesheet" type="text/css"  th:href="@{/vendors/chartist/dist/chartist.min.css}" href="../static/vendors/chartist/dist/chartist.min.css"/>
    <!-- v1.4.0 -->
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/nprogress/nprogress.css}" href="../static/vendors/nprogress/nprogress.css"/>
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/jquery-steps/demo/css/jquery.steps.css}" href="../static/vendors/jquery-steps/demo/css/jquery.steps.css"/>
    <!-- v1.4.2 -->
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/bootstrap-select/dist/css/bootstrap-select.min.css}" href="../static/vendors/bootstrap-select/dist/css/bootstrap-select.min.css"/>
    <!-- v1.7.0 -->
    <link rel="stylesheet" type="text/css" th:href="@{/vendors/dropify/dist/css/dropify.min.css}" href="../static/vendors/dropify/dist/css/dropify.min.css"/>

    <!-- Clean UI Styles -->
    <link rel="stylesheet" type="text/css" th:href="@{/common/css/source/main.css}" href="../static/common/css/source/main.css"/>

    <!-- Vendors Scripts -->
    <!-- v1.0.0 -->
    <script th:src="@{/vendors/jquery/jquery.min.js}" src="../static/vendors/jquery/jquery.min.js" ></script>
    <script th:src="@{/vendors/tether/dist/js/tether.min.js}" src="../static/vendors/tether/dist/js/tether.min.js"></script>
    <script th:src="@{/vendors/bootstrap/dist/js/bootstrap.min.js}" src="../static/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script th:src="@{/vendors/jquery-mousewheel/jquery.mousewheel.min.js}" src="../static/vendors/jquery-mousewheel/jquery.mousewheel.min.js"></script>
    <script th:src="@{/vendors/jscrollpane/script/jquery.jscrollpane.min.js}" src="../static/vendors/jscrollpane/script/jquery.jscrollpane.min.js"></script>
    <script th:src="@{/vendors/spin.js/spin.js}" src="../static/vendors/spin.js/spin.js"></script>
    <script th:src="@{/vendors/ladda/dist/ladda.min.js}" src="../static/vendors/ladda/dist/ladda.min.js"></script>
    <script th:src="@{/vendors/select2/dist/js/select2.full.min.js}" src="../static/vendors/select2/dist/js/select2.full.min.js"></script>
    <script th:src="@{/vendors/html5-form-validation/dist/jquery.validation.min.js}" src="../static/vendors/html5-form-validation/dist/jquery.validation.min.js"></script>
    <script th:src="@{/vendors/jquery-typeahead/dist/jquery.typeahead.min.js}" src="../static/vendors/jquery-typeahead/dist/jquery.typeahead.min.js"></script>
    <script th:src="@{/vendors/jquery-mask-plugin/dist/jquery.mask.min.js}" src="../static/vendors/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
    <script th:src="@{/vendors/autosize/dist/autosize.min.js}" src="../static/vendors/autosize/dist/autosize.min.js"></script>
    <script th:src="@{/vendors/bootstrap-show-password/bootstrap-show-password.min.js}" src="../static/vendors/bootstrap-show-password/bootstrap-show-password.min.js"></script>
    <script th:src="@{/vendors/moment/min/moment.min.js}" src="../static/vendors/moment/min/moment.min.js"></script>
    <script th:src="@{/vendors/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js}" src="../static/vendors/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script th:src="@{/vendors/fullcalendar/dist/fullcalendar.min.js}" src="../static/vendors/fullcalendar/dist/fullcalendar.min.js"></script>
    <script th:src="@{/vendors/cleanhtmlaudioplayer/src/jquery.cleanaudioplayer.js}" src="../static/vendors/cleanhtmlaudioplayer/src/jquery.cleanaudioplayer.js"></script>
    <script th:src="@{/vendors/cleanhtmlvideoplayer/src/jquery.cleanvideoplayer.js}" src="../static/vendors/cleanhtmlvideoplayer/src/jquery.cleanvideoplayer.js"></script>
    <script th:src="@{/vendors/bootstrap-sweetalert/dist/sweetalert.min.js}" src="../static/vendors/bootstrap-sweetalert/dist/sweetalert.min.js"></script>
    <script th:src="@{/vendors/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js}" src="../static/vendors/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js"></script>
    <script th:src="@{/vendors/summernote/dist/summernote.min.js}" src="../static/vendors/summernote/dist/summernote.min.js"></script>
    <script th:src="@{/vendors/owl.carousel/dist/owl.carousel.min.js}" src="../static/vendors/owl.carousel/dist/owl.carousel.min.js"></script>
    <script th:src="@{/vendors/ionrangeslider/js/ion.rangeSlider.min.js}" src="../static/vendors/ionrangeslider/js/ion.rangeSlider.min.js"></script>
    <script th:src="@{/vendors/nestable/jquery.nestable.js}" src="../static/vendors/nestable/jquery.nestable.js"></script>
    <script th:src="@{/vendors/datatables/media/js/jquery.dataTables.min.js}" src="../static/vendors/datatables/media/js/jquery.dataTables.min.js"></script>
    <script th:src="@{/vendors/datatables/media/js/dataTables.bootstrap4.min.js}" src="../static/vendors/datatables/media/js/dataTables.bootstrap4.min.js"></script>
    <script th:src="@{/vendors/datatables-fixedcolumns/js/dataTables.fixedColumns.js}" src="../static/vendors/datatables-fixedcolumns/js/dataTables.fixedColumns.js"></script>
    <script th:src="@{/vendors/datatables-responsive/js/dataTables.responsive.js}" src="../static/vendors/datatables-responsive/js/dataTables.responsive.js"></script>
    <script th:src="@{/vendors/editable-table/mindmup-editabletable.js}" src="../static/vendors/editable-table/mindmup-editabletable.js"></script>
    <script th:src="@{/vendors/d3/d3.min.js}" src="../static/vendors/d3/d3.min.js"></script>
    <script th:src="@{/vendors/c3/c3.min.js}" src="../static/vendors/c3/c3.min.js"></script>
    <script th:src="@{/vendors/chartist/dist/chartist.min.js}" src="../static/vendors/chartist/dist/chartist.min.js"></script>
    <script th:src="@{/vendors/peity/jquery.peity.min.js}" src="../static/vendors/peity/jquery.peity.min.js"></script>
    <!-- v1.0.1 -->
    <script th:src="@{/vendors/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.min.js}" src="../static/vendors/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- v1.1.1 -->
    <script th:src="@{/vendors/gsap/src/minified/TweenMax.min.js}" src="../static/vendors/gsap/src/minified/TweenMax.min.js"></script>
    <script th:src="@{/vendors/hackertyper/hackertyper.js}" src="../static/vendors/hackertyper/hackertyper.js"></script>
    <script th:src="@{/vendors/jquery-countTo/jquery.countTo.js}" src="../static/vendors/jquery-countTo/jquery.countTo.js"></script>
    <!-- v1.4.0 -->
    <script th:src="@{/vendors/nprogress/nprogress.js}" src="../static/vendors/nprogress/nprogress.js"></script>
    <script th:src="@{/vendors/jquery-steps/build/jquery.steps.min.js}" src="../static/vendors/jquery-steps/build/jquery.steps.min.js"></script>
    <!-- v1.4.2 -->
    <script th:src="@{/vendors/bootstrap-select/dist/js/bootstrap-select.min.js}" src="../static/vendors/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script th:src="@{/vendors/chart.js/src/Chart.bundle.min.js}" src="../static/vendors/chart.js/src/Chart.bundle.min.js"></script>
    <!-- v1.7.0 -->
    <script th:src="@{/vendors/dropify/dist/js/dropify.min.js}" src="../static/vendors/dropify/dist/js/dropify.min.js"></script>

    <!-- Clean UI Scripts -->
    <script th:src="@{/common/js/common.js}" src="../static/common/js/common.js"></script>
    <script th:src="@{/common/js/demo.temp.js}" src="../static/common/js/demo.temp.js"></script>
</head>
<body class="theme-default">
<nav class="left-menu" >
    <div class="logo-container">
        <a href="index.html" class="logo">
            <img src="../static/common/img/logo.png" alt="Clean UI Admin Template" />
            <img class="logo-inverse" src="../static/common/img/logo-inverse.png" alt="Clean UI Admin Template" />
        </a>
    </div>
    <div class="left-menu-inner scroll-pane">
        <ul class="left-menu-list left-menu-list-root list-unstyled">
            <li class="left-menu-list-active">
                <a class="left-menu-link" href="items.html">
                    <i class="left-menu-link-icon icmn-home2"><!-- --></i>
                    <span class="menu-top-hidden">Items List</span>
                </a>
            </li>
        </ul >
    </div>
</nav>
<nav class="top-menu">
    <div class="menu-icon-container hidden-md-up">
        <div class="animate-menu-button left-menu-toggle">
            <div><!-- --></div>
        </div>
    </div>
    <div class="menu">
        <div class="menu-user-block">
            <div class="dropdown dropdown-avatar">
                <a href="javascript: void(0)" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span class="avatar" href="javascript:void(0)">
                        <img src="../static/common/img/temp/avatars/1.jpg" alt="Alternative text to the image"/>
                    </span>
                </a>
                <!--PROFILE-->
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-user"></i> Profile</a>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-header">Home</div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> System Dashboard</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> User Boards</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> Issue Navigator (35 New)</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-exit"></i> Logout</a>
                </ul>

            </div>

        </div>
    </div>
</nav>

<section class="page-content">
    <div class="page-content-inner">

        <!-- Ecommerce Products List -->
        <section class="panel panel-with-borders">
            <div class="panel-heading">

                <div class="dropdown pull-right">
                    <ul class="dropdown-menu" aria-labelledby="" role="menu">
                        <a class="dropdown-item" href="javascript: void(0)">Simple Product</a>
                        <a class="dropdown-item" href="javascript: void(0)">Configurable Product</a>
                        <a class="dropdown-item" href="javascript: void(0)">Grouped Product</a>
                        <a class="dropdown-item" href="javascript: void(0)">Virtual Product</a>
                        <a class="dropdown-item" href="javascript: void(0)">Bundle Product</a>
                        <a class="dropdown-item" href="javascript: void(0)">Downloadable Product</a>
                    </ul>
                </div>

            </div>
            <div class="panel-body">
                <table class="table table-hover nowrap" id="example1" width="100%">

                    <thead class="thead-default">
                    <tr>
                        <th>ID</th>
                        <th>Foto</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Categoría</th>
                        <th>Usuario</th>
                        <th>Estado</th>
                        <th>Acción</th>
                    </tr>
                    </thead>


                    <tbody>
                    <th:block th:each="item : ${items}">
                        <tr class="items-table">
                            <td th:text="${item.id}">id</td>
                            <td><div class="cui-ecommerce--catalog--item--img">
                                <a th:href="@{'/items/' + ${item.id}}">
                                    <img th:src="${item.photo1}"/>
                                    <img th:src="${item.photo2}"/>
                                    <img th:src="${item.photo3}"/>
                                </a>
                            </div></td>
                            <td th:text="${item.name}">name</td>
                            <td th:text="${item.description}">descripcion</td>
                            <td th:text="${item.category.name}">category</td>
                            <td th:text="${item.user.name} +' ' + ${item.user.last_name}">userName</td>
                            <td th:text="${item.status}"></td>
                            <td>
                                <button id="verItem" href="javascript: void(0) " type="button" class="btn btn-info btn-sm">Editar</button>
                                <form th:method="DELETE" th:action="@{'/items/' + ${item.id}}">
                                    <a href="javascript:void(0)" data-toggle="modal" data-target="#edit-item" class="btn btn-success btn-xs btn-edit edit-user">Editar</a>
                                    <button id="btn-delete-user" type="submit" class="btn btn-danger btn-xs">Delete</button>
                                </form>

                            </td>
                        </tr>
                    </th:block>
                    </tbody>
                </table>
            </div>
        </section>
        <!-- End Ecommerce Products List -->
    </div>

    <!-- Modal Dialog de eliminar-->
    <div class="modal fade" id="confirmDelete" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Delete Parmanently</h4>
                </div>
                <div class="modal-body">
                    <p>Are you sure about this?</p>
                </div>
                <div class="modal-footer">
                    <form id="confirm_form" th:action="@{'/items/' + id}" th:method="DELETE" role="button">
                        <button type="button" class="btn btn-default" data-dismiss="modal">
                            Cancel
                        </button>
                        <button type="submit" class="btn btn-danger" data-dismiss="modal" id="btn_confirm_delete">
                            Eliminar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
<!--Modal dialog para editar un item-->
    <div class="modal fade" id="edit-item" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">Editar Item</h4>
                </div>
                <form th:method="PUT" name="user" id="edit-item-form">
                    <div class="modal-body">

                        <input type="hidden" class="form-control" id="edit-item-id" name="id"/>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-name">Nombre</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Nombre" id="edit-item-name" name="name"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-description">Descripcion</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Descripción" id="edit-item-description" name="description"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-category">Categoría</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Categoría" id="edit-item-category" name="category"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-user">Usuario</label>
                            </div>
                            <div class="col-md-9">
                                <!--<input type="text" class="form-control"  id="edit-item-user" name="user" placeholder=""/>-->
                                <h3 id="edit-item-user">Nombre usuario</h3>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-status">Status</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Status" id="edit-item-status" name="status"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-photo1">Imagen 1</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Imagen 1 url" id="edit-item-photo1" name="photo1"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-photo2">Imagen 2</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Imagen 2 url" id="edit-item-photo2" name="photo2"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-control-label" for="edit-item-photo3">Imagen 3</label>
                            </div>
                            <div class="col-md-9">
                                <input type="text" class="form-control" placeholder="Imagen 3 url" id="edit-item-photo3" name="photo3"/>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" data-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Dialog show event handler -->
    <script type="text/javascript">
        $(function () {
            $(".btn_delete").on("click", function (e) {
                e.preventDefault();
                var id = $(this).data("id");
                console.log(id);
                $("#confirm_form").attr('action', '/items/' + id);
                $("#confirmDelete").modal('show');
            });
        });

        $("#btn_confirm_delete").on('click', function () {
            $('#confirm_form').submit();
        });
    </script>
    <!-- Page Scripts -->
    <script>
        $(function () {
            // Datatables
            $('#example1').DataTable({
                "lengthMenu": [[50, 100, 200, -1], [50, 100, 200, "All"]],
                responsive: true,
                "autoWidth": false
            });
        })
    </script>
    <script>
        $(".verItem").click(function(e){
            e.preventDefault();
            var td = $(this).parents('tr').find('td:lt(7)');
            var itemId = $(td[0]).text()
            $('#edit-item-id').val(itemId);
            $('#edit-item-name').val($(td[2]).text());
            $('#edit-item-description').val($(td[2]).text());
            $('#edit-item-category').val($(td[3]).text());
            $('#edit-item-status').val($(td[4]).text());
            $('#edit-item-photo1').val($('#item-img-' + itemId).attr('src'));
            $('#edit-item-photo2').val($('#item-img-' + itemId).attr('src'));
            $('#edit-item-photo3').val($('#item-img-' + itemId).attr('src'));
            $('#edit-item-form').attr('action', "/items/" + itemId);
        });

        $(function(){
            $('#example2').DataTable({
                autoWidth: true,
                scrollX: true,
                fixedColumns: true
            });
        });
    </script>
    <!-- End Page Scripts -->
</section>

</body>
</html>